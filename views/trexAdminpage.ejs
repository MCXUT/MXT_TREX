<!DOCTYPE html>
<html lang="en">
<head>
  <title>admin 페이지 - 트렉스</title>
  <meta charset="utf-8">

  <% include ./partials/header %>
  <link href="https://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="/static/stylesheets/auth.css">

  <!-- scroll to top button -->
  <script>
  document.addEventListener("DOMContentLoaded", function (event) {
     // type();
     movingBackgroundImage();
  });
  </script>
  <div class="container-fluid">
  <button href="#" id="scroll" style="display: none;">&uarr;<br>top</button>
  </div>

  <script>

  $(document).ready(function(){
    $(window).scroll(function(){
        if ($(this).scrollTop() > -1) {
            $('#scroll').fadeIn().css("z-index","4");
        } else {
            $('#scroll').fadeOut();
        }

    });
    $('#scroll').click(function(e){
        $("html, body").animate({ scrollTop: 0 }, 600);
        return false;
    });
  });
  </script>
  <!-- /scroll to top button -->
    <link rel="stylesheet" href="../static/stylesheets/adminpage.css">


</head>
<body>

  <script>
  function dashBoard(){
      document.getElementById('dashBoard').style.display='inline';
      document.getElementById('users-clients').style.display='none';
      document.getElementById('users-partners').style.display='none';
      document.getElementById('services_1').style.display="none";
      document.getElementById('services_2').style.display="none";
      document.getElementById('services_3').style.display="none";
      document.getElementById('adminList').style.display='none';
      document.getElementById('addAdmin').style.display='none';
  }

  function usersClients(){
      document.getElementById('dashBoard').style.display='none';
      document.getElementById('users-clients').style.display='inline';
      document.getElementById('users-partners').style.display='none';
      document.getElementById('services_1').style.display="none";
      document.getElementById('services_2').style.display="none";
      document.getElementById('services_3').style.display="none";
      document.getElementById('adminList').style.display='none';
      document.getElementById('addAdmin').style.display='none';
  }

  function usersPartners(){
      document.getElementById('dashBoard').style.display='none';
      document.getElementById('users-clients').style.display='none';
      document.getElementById('users-partners').style.display='inline';
      document.getElementById('services_1').style.display="none";
      document.getElementById('services_2').style.display="none";
      document.getElementById('services_3').style.display="none";
      document.getElementById('adminList').style.display='none';
      document.getElementById('addAdmin').style.display='none';
  }

  function services1(){
      document.getElementById('dashBoard').style.display='none';
      document.getElementById('users-clients').style.display='none';
      document.getElementById('users-partners').style.display='none';
      document.getElementById('services_1').style.display="inline";
      document.getElementById('services_2').style.display="none";
      document.getElementById('services_3').style.display="none";
      document.getElementById('adminList').style.display='none';
      document.getElementById('addAdmin').style.display='none';
  }

  function services2(){
    document.getElementById('dashBoard').style.display='none';
    document.getElementById('users-clients').style.display='none';
    document.getElementById('users-partners').style.display='none';
    document.getElementById('services_1').style.display="none";
    document.getElementById('services_2').style.display="inline";
    document.getElementById('services_3').style.display="none";
    document.getElementById('adminList').style.display='none';
    document.getElementById('addAdmin').style.display='none';

  }
  function services3(){
    document.getElementById('dashBoard').style.display='none';
    document.getElementById('users-clients').style.display='none';
    document.getElementById('users-partners').style.display='none';
    document.getElementById('services_1').style.display="none";
    document.getElementById('services_2').style.display="none";
    document.getElementById('services_3').style.display="inline";
    document.getElementById('adminList').style.display='none';
    document.getElementById('addAdmin').style.display='none';

  }

  function adminList(){
      document.getElementById('dashBoard').style.display='none';
      document.getElementById('users-clients').style.display='none';
      document.getElementById('users-partners').style.display='none';
      document.getElementById('services_1').style.display="none";
      document.getElementById('services_2').style.display="none";
      document.getElementById('services_3').style.display="none";
      document.getElementById('adminList').style.display='inline';
      document.getElementById('addAdmin').style.display='none';
  }

  function addAdmin(){
      document.getElementById('dashBoard').style.display='none';
      document.getElementById('users-clients').style.display='none';
      document.getElementById('users-partners').style.display='none';
      document.getElementById('services_1').style.display="none";
      document.getElementById('services_2').style.display="none";
      document.getElementById('services_3').style.display="none";
      document.getElementById('adminList').style.display='none';
      document.getElementById('addAdmin').style.display='inline';

  }
  </script>

  <div class="topnav" style="background-color:white;position:fixed;width:100%;z-index:500;"> <!-- z-index:500; -->
    <a class="logo " href="/"><img class="margin" src="/static/images/0.jpg" height="60" width="100"></img></a>


    <a  id="admin_topNav" href="https://crewmxt.com/services/contact-us" target = "_blank" ><i class="fas fa-phone-volume"></i> Contact Us</a>
    <a  id="admin_topNav"href="/auth/logout"><i class="fas fa-sign-out-alt"></i> Log Out</a>


  </div>


<div id="myDIV">
  <div class="sidebar sticky-top sticky-offset">
  <a class="nav-item active" href="#?dashboard" onclick="dashBoard();"><i class="fas fa-chart-line"></i> Dashboard</a>

  <a class="nav-item dropdown-btn" href="#?users "><i class="fas fa-users"></i> Users
      <i class="fa fa-caret-down" style="display:inline;" ></i>
    </a>

    <div class="dropdown-container">
      <a class="nav-item" href="#?users-clients" onclick="usersClients();"><i class="fas fa-user"></i> Clients</a>
      <a class="nav-item" href="#?users-partners" onclick="usersPartners();"><i class="far fa-handshake"></i> Partners</a>
    </div>

    <a class="nav-item dropdown-btn" href="#?services "><i class="fas fa-cogs"></i> Services
        <i class="fa fa-caret-down" ></i>
      </a>

      <div class="dropdown-container">
        <a class="nav-item" href="#?services_1" onclick="services1();"><i class="far fa-envelope"></i> Messages </a>
        <a class="nav-item" href="#?services_2" onclick="services2();"><i class="fas fa-tools"></i> Steven2</a>
        <a class="nav-item" href="#?services_3" onclick="services3();"><i class="fas fa-hammer"></i> Steven3</a>
      </div>


    <a class="nav-item dropdown-btn" href="#?admin "><i class="fas fa-user-secret"></i> Admin
        <i class="fa fa-caret-down" ></i><i class="fas fa-caret-up" style="display:none;"></i>
      </a>

  <div class="dropdown-container">
    <a class="nav-item" href="#?adminList" onclick="adminList();"><i class="fas fa-list"></i> Admin List</a>
    <a class="nav-item" href="#?addAdmin" onclick="addAdmin();"><i class="fas fa-plus" style="margin-left:0;padding-left:0;"></i> Add Admin</a>
  </div>
  </div>
</div>


<script>
  var dropdown = document.getElementsByClassName("dropdown-btn");
  var i;

  for (i = 0; i < dropdown.length; i++) {
    dropdown[i].addEventListener("click", function() {
    <!-- this.classList.toggle("active"); -->
    var dropdownContent = this.nextElementSibling;
    if (dropdownContent.style.display === "block") {
    dropdownContent.style.display = "none";
    } else {
    dropdownContent.style.display = "block";
    }
    });
  }


var header = document.getElementById("myDIV");
var btns = header.getElementsByClassName("nav-item");
for (var i = 0; i < btns.length; i++) {
  btns[i].addEventListener("click", function() {
  var current = document.getElementsByClassName("active");
  current[0].className = current[0].className.replace(" active", "");
  this.className += " active";
  });
}


</script>

<div id="dashBoard" style="display:inline;">
<div class="content" style="padding-top:80px;">
  dashboard content

</div>
</div>

<div id="users-clients" style="display:none;">
  <div class="content" >

  <table class="table table-bordered margin2" >
  <thead class="thead-dark">
    <tr>
      <th id="adminPanelOrder" scope="col">#</th>
      <th id="adminPanelRegDate" scope="col">Registration Date</th>
      <th id="adminPanelName" scope="col">Name</th>
      <th id="adminPanelEmail" scope="col">Email</th>
      <th id="adminPanelDOB" scope="col">DOB</th>
      <th scope="col">Address</th>
      <th id="edit-delete" scope="col">Edit</th>
      <th id="edit-delete" scope="col">Delete</th>
    </tr>
  </thead>
  <tbody>
    <% for(var i = 0; i < clientList.length; i++) { %>
        <tr>
          <th scope="row"><%= i+1 %></th>
          <td nowrap><%= clientList[i].registeredDate %></td>
          <td nowrap><%= clientList[i].name %></td>
          <td nowrap><%= clientList[i].email %></td>
          <td nowrap><%= clientList[i].dateOfBirth %></td>
          <td nowrap><%= clientList[i].companyAddress %></td>
          <td ><a href="#"><i class="far fa-edit"></i></a></td>
          <td ><a href="#"><i class="fas fa-trash"></i></a></td>
        </tr>
    <% } %>
  </tbody>
</table>
</div>
</div>

<div id="users-partners" style="display:none;">
  <div class="content ">

  <table class="table table-bordered margin2" >
  <thead class="thead-dark">
    <tr>
      <th scope="col">#</th>
      <th scope="col">Registration Date</th>
      <th scope="col">Name</th>
      <th scope="col">Email</th>
      <th scope="col">DOB</th>
      <th scope="col">Region</th>
      <th id="edit-delete" scope="col">Edit</th>
      <th id="edit-delete" scope="col">Delete</th>
    </tr>
  </thead>
  <tbody>
    <% for(var i = 0; i < partnerList.length; i++) { %>
        <tr>
          <th scope="row"><%= i+1 %></th>
          <td nowrap><%= partnerList[i].registeredDate %></td>
          <td nowrap><%= partnerList[i].name %></td>
          <td nowrap><%= partnerList[i].email %></td>
          <td nowrap><%= partnerList[i].dateOfBirth %></td>
          <td nowrap><%= partnerList[i].city %>,</td>
          <td ><a href="#"><i class="far fa-edit"></i></a></td>
          <td ><a href="#"><i class="fas fa-trash"></i></a></td>
        </tr>
    <% } %>
  </tbody>
</table>

</div>
</div>


<div id="services_1" style="display:none;">
<div class="content" >

  <table class="table table-bordered margin2" >
  <thead class="thead-dark">
    <tr >
      <th scope="col">#</th>
      <th scope="col">First Sent Date</th>
      <th scope="col">Last Sent Date</th>
      <th scope="col">Client</th>
      <th scope="col">Partner</th>
      <th id="edit-delete" scope="col">Details</th>
      <th id="edit-delete" scope="col">Delete</th>
    </tr>
  </thead>
  <tbody>
    <% for(var i = 0; i < messageList.length; i++) { %>
        <tr class="header">
          <th scope="row"><%= i+1 %></th>
          <td nowrap><%= messageList[i].detail[0].date %></td>
          <% var numDetails = messageList[i].detail.length - 1; %>
          <td nowrap><%= messageList[i].detail[numDetails].date %></td>
          <td nowrap><%= messageList[i].clientName %></td>
          <td nowrap><%= messageList[i].partnerName %></td>
          <td nowrap><a href="#"><i class="far fa-edit"></i></a></td>
          <td id="delete_box"><a href="#"><i class="fas fa-trash"></i></a></td>
        </tr>
        <tr class="message thead-light" id="message_<%= i+1 %>">
            <th ></th>
            <th>User <%= i+1 %></th>
            <th>Date for <%= i+1 %></th>
            <th>Message for <%= i+1 %></th>
            <th><i class="fas fa-trash"></i></th>
        </tr>
        <tr class="message">
            <td ></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    <% } %>
  </tbody>
  </table>



    <script>
        $('.header').click(function(){
        $(this).find('span').text(function(_, value){return value=='-'?'+':'-'});
        $(this).nextUntil('tr.header').slideToggle(100, function(){
        });
        });

        $('.message').hide().filter(function () {
        return $(this).find('td[colspan]').length;
        }).addClass('header').css('display', 'table-row').click(function () {
        $(this).nextUntil('tr.header').css('display', function (i, v) {
            return this.style.display === 'table-row' ? 'none' : 'table-row';
        });
        });
    </script>

</div>
</div>


<div id="services_2" style="display:none;">
<div class="content" style="padding-top:80px;">
<h3>Service 2 content</h3>
</div>
</div>


<div id="services_3" style="display:none;">
<div class="content" style="padding-top:80px;">
<h3>Service 3 content</h3>
</div>
</div>

<div id="adminList" style="display:none;" >
  <div class="content">
    <table class="table table-bordered margin2" >
    <thead class="thead-dark">
      <tr>
        <th scope="col">#</th>
        <th scope="col">Registration Date</th>
        <th scope="col">Name</th>
        <th scope="col">Email</th>
        <th id="edit-delete" scope="col">Edit</th>
        <th id="edit-delete" scope="col">Delete</th>
      </tr>
    </thead>
    <tbody>
      <% for(var i = 0; i < adminList.length; i++) { %>
          <tr>
            <th scope="row"><%= i+1 %></th>
            <td nowrap><%= adminList[i].registeredDate %></td>
            <td nowrap><%= adminList[i].name %></td>
            <td nowrap><%= adminList[i].email %></td>
            <td ><a href="#"><i class="far fa-edit"></i></a></td>
            <td ><a href="#"><i class="fas fa-trash"></i></a></td>
          </tr>
      <% } %>
    </tbody>
  </table>
</div>
</div>


<div id="addAdmin" style="display:none;">
  <div class="content" style="padding-top:80px;">
    <center>
    <div class="modal-body">
      <div class="auth_content">

<!-- Tester -->
<center>
    <div class="modal-body">
      <div class="auth_content">
          <h3><p>Add Admin</p></h3>
          <br><br>

          <div class="loginform registerform">
            <% if (error) { %>
              <span style="color:red"><%= error %></span>
            <% } %>
              <form action="/addAdmin" method="post" id="myform">

                  <% if(fail.length > 0) { %>
                  <p>Name</p>
                  <input class="form-control currentname" type="text" name="name" value="<%= fail[0].name %>" required>
                  <p>Email</p>
                  <input class="form-control currentemail" type="email" name="email" value="<%= fail[0].email %>" required>
                  <p>Password</p>
                  <input class="form-control currentpassword" type="password" name="password" value="<%= fail[0].password %>" required>

                  <% } else { %>

                  <p>Name</p>
                  <input class="form-control currentname" type="text" name="name" required>
                  <p>Email</p>
                  <input class="form-control currentemail" type="email" name="email" required>
                  <p>Password</p>
                  <input class="form-control currentpassword" type="password" name="password" required>
                  <% } %>

                  <p>Confirm Password</p>
                  <input class="form-control" type="password" name="password2" id="confirm_password" onkeyup='check();' required>
                  <input class="form-control btn btn-primary" type="submit" value="Register">
                </form>


            </div>
      </div>
    </div>
</center>
<!-- Tester -->

</div>
</div>
</center>
  </div>
</div>


<center style="font-weight:700;font-size:13px;padding-left:200px;">COPYRIGHT© 2019 MXT. ALL RIGHTS RESERVED BY CREWMXT.COM</center>
<br>
</body>
</html>
