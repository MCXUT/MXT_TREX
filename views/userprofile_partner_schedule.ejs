<html>
    <head>
        <meta charset="utf-8">
        <style>
            .showBttn {
                display: inline !important;
            }
            .btn-primary {
                /* display: inline !important; */
                background-color:#f58b44 !important;
                border-color:#f58b44 !important;
            }
            .btn-primary:hover {
                cursor: pointer;
                /* background-color: #00b3db !important;
                border-color: #00b3db !important; */
                opacity: 0.9;
            }
            a:hover {
                cursor: pointer;
            }
            #avatar{
                border-radius: 50%;
                width: 45px;
                height: 45px;
                background-size: cover;
                margin: 0;
                 position: absolute;
                 top: 50%;
                 -ms-transform: translateY(-50%);
                 transform: translate3d(-50%,-50%,0);

            }
            .leftside, .rightside{
                width: 100%;
                /* border: 1px solid rgba(0, 0, 0, 0.5); */
                margin-bottom: 10px;
                z-index: 2;

            }
            #left{
              max-width: 25%;
            }
            #left, #right{
              height: 80px;
              padding: 10px;
            }
            #sliders a{
                text-decoration: none;
                color:black;
            }
            #wrapper{
              width: 50%;
              height: 550px;
              overflow-y:scroll;
              overflow-x: hidden;
              float:left;
              position: relative;
              margin:0;
              padding-left: 2.5%;
              padding-right: 2.5%;

            }
            #wrapper .row{
              border: 1px solid rgba(0, 0, 0, 0.3);
              width: 500px;
            }
            #wrapper h4{
              font-size: 20px;

            }
            .datepicker td.active.active{
                /* background-color: #F58B44 !important; */
                background-color: #fff !important;
                color: rgba(100, 100, 100, 0.1)!important;
                /* color: #fff; */
                border-color: none !important;
                background-image:none;
                text-decoration: line-through;
            }
            .datepicker-days{
                margin: 20px;
            }

            .table-condensed{
                width: 100%;
                margin-bottom: 20px !important;
                /* border: 1px solid rgba(0, 0, 0, 0.5) !important; */
                /* border-bottom: 1px solid rgba(0, 0, 0, 0.5); */
            }
            .datepicker-days{
                border: 1px solid rgba(0, 0, 0, 0.3) !important;
                width: 300%;
                padding: 20px;
                padding-top: 35px;
            }
            /* thead > tr{
                height: 40px;
            } */
            .dropdown.bootstrap-select.show-tick{
                float: right;

            }
            @media(max-width: 500px){
                .datepicker-days{
                    width: 150%;
                }
            };
            @media(max-width: 800px){
                .datepicker-days{
                    width: 200%;
                }
            };

        </style>

        <title>Member - 트렉스</title>

        <% include ./partials/header %>
        <!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" /> -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker3.min.css">
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">




        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/bootstrap-select.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/i18n/defaults-*.min.js"></script>


        <!-- <script src="bootstrap-datepicker.ko.js" charset="UTF-8"></script> -->

        <!-- <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
    <link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" /> -->

        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/datedropper/2.0/datedropper.js" type="text/javascript"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/datedropper/2.0/datedropper.min.js" type="text/javascript"></script> -->



        <!-- <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <script src="http://multidatespickr.sourceforge.net/jquery-ui.multidatespicker.js"></script> -->
    </head>
    <body>

        <% include ./partials/profileedit-image %>
        <% include ./partials/profileedit-background %>

        <% include ./partials/navbar %>

        <link rel="stylesheet" href="/static/stylesheets/profile.css">

        <div class="profile">
            <div class="tab">
                <div class="row top">
                    <div class="col-12">
                        <p class="setting">일정 관리</p>
                        <div class="menu">
                            <a class="partnerprofileinfo" href="/user_profile/partnerProfile">프로필 관리</a>
                            <a class="taskreservationinfo" href="/user_profile/tasks">업무 예약 관리</a>
                            <a class="scheduleinfo profileactive" href="/user_profile/schedule">일정 관리</a>
                            <% if (currentUser.messageNotification) { %>
                                <i class="fas fa-circle fa-xs" style="color:red;font-size:10px;margin-bottom:3px;"></i>
                                <a class="messages" href="/user_profile/messages">메세지</a>
                            <% } else { %>
                                <a class="messages" href="/user_profile/messages">메세지</a>
                            <% } %>
                            <a class="paymentinfo" href="/user_profile/payment_info">정산 계좌 등록</a>
                            <a class="accountinfo" href="/user_profile/account_info">계정관리</a>
                        </div>
                    </div>
                </div>
                <div class="row bottom">
                    <div class="col-md-4 col-12" style="padding:0% 0% 0% 5.2%;">
                        <div class="backgroundimg">
                            <% if (currentUser.coverPhoto) { %>
                                <img id="kokoman" src="/coverPhoto/<%= currentUser.coverPhoto %>">
                            <% } else { %>
                                <img id="kokoman" src="/static/images/slider/slider-4-montreal.jpg">
                            <% } %>
                            <div class="changefade">
                                배경 사진 바꾸기
                                <span class="camera"></span>
                            </div>
                        </div>

                        <div class="mainimg">
                        <% if (currentUser.profilePic) { %>
                            <img class="profileimg" src="/profilePic/<%= currentUser.profilePic %>">
                        <% } else { %>
                            <img class="profileimg" src="/static/images/noprofilepic.jpeg">
                        <% } %>
                            <div class="changeslider">
                                사진 바꾸기<br/>
                                <span class="camera"></span>
                            </div>
                        </div>

                        <p class="userName"><%= currentUser.name %></p>
                    </div>

                    <div class="col-md-8">


                        <!--  스케줄 정보  -->
                          <% if (error.length > 0) { %>
                            <span style="color:red;margin-left:70px;"><%= error %></span>
                          <% } %>
                          
                          <% if (unavailableDates) { %>
                              <div class="row sections basic" id="basic">
                                  <p class="basictitle"><b>일정 관리</b></p>
                                  <span style="float: right">
                                      <input type="submit" form="editUnavailability" value="날짜 조정" class="btn btn-primary showBttn">
                                  </span>
                                  <div class="divider"></div>
                                  <form id="editUnavailability" action="/user_profile/edit_unavailable_dates" method="post"></form>
                                  <div class="input-group form-group date">
                                      <input type="text" id="koko" form="editUnavailability" name="unavailability" value="<%= unavailableDates %>" style="display:none;">
                                      <!-- <input type="text" style="display: none"form="basicinfoform" class="form-control date" name="schedule" multiple value="일-월-년"/> -->
                                      <!-- <span class="date" for="nal"><i class="fas fa-calendar-alt"></i></span> -->
                                  </div>

                                  <div class="row" style="width: 100%; float:right; margin-left: 75%" >

                                      <div class="box" style="width: 13px; height: 14px; background: #F58B44; transform: translate3d(0, 50%, 0);margin-right: 4px">

                                      </div>
                                      <span style="float: right">
                                       - 불가능 날짜
                                      </span>

                                  </div>




                              </div>


                              <div class="form-group row" id="har" style="margin-left: 10%;margin-right: 17%;">
                                  <div class="col-sm-5">
                                      <label for="region">불가능 날짜선택(하나 이상 선택가능)</label>
                                  </div>
                                  <div class="col-sm-7">
                                      <select class="selectpicker" id="region" multiple  data-live-search="false" placeholder="지역을 선택 해주세요">
                                          <option>주중불가능</option>
                                          <option>주말불가능</option>
                                          <option>토요일불가능</option>
                                          <option>일요일불가능</option>




                                      </select>
                                  </div>
                              </div>
                          <% } else { %>
                              <div class="row sections basic" id="basic">
                                  <p class="basictitle"><b>일정 관리</b></p>
                                  <div class="divider"></div>

                                  파트너 프로필이 등록되어 있지 않습니다. 새로운 프로필을 등록해주세요.

                              </div>
                          <% } %>



                            <!-- <br><br><br><br> -->
                            <!-- <input type="text" form="basicinfoform" class="form-control date" name="schedule" multiple value=""/> -->
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <script src="/static/scripts/changeimg.js"></script>

    <script>
    $(document).ready(() => {
        var editbuttons = document.querySelectorAll("#edit");
        var confirmbuttons = document.querySelectorAll("#confirm");
        var cancelbuttons = document.querySelectorAll("#cancel");

        editbuttons.forEach((editbutton) => {
                $(editbutton).click((e) => {
                    // e.preventDefault();

                    var parentDivision = editbutton.parentElement;
                    var parentDivisionClass = parentDivision.className.split(" ");
                    var allButtons = parentDivision.querySelectorAll("button");
                    allButtons.forEach((button) => {
                        $(button).toggleClass("activebutton");
                    });

                    if(parentDivisionClass[1] === "basicinfo") {
                        var spans = document.getElementById("basic").querySelectorAll(".switch");
                        spans.forEach((span) => {
                            $(span).toggleClass("active");
                        });
                    } else if(parentDivisionClass[1] === "photoinfo") {
                        var spans = document.getElementById("photo").querySelectorAll(".switch");
                        spans.forEach((span) => {
                            $(span).toggleClass("active");
                        });
                    } else if(parentDivisionClass[1] === "privateinfo") {
                        var spans = document.getElementById("security").querySelectorAll(".switch");
                        spans.forEach((span) => {
                            $(span).toggleClass("active");
                        });
                    }
                });
            });
    });
    </script>

    <script>
        // Script for file input (profile picture in this case) button and displaying the file name
        $(function() {
            // We can attach the `fileselect` event to all file inputs on the page
            $(document).on('change', ':file', function() {
                var input = $(this),
                numFiles = input.get(0).files ? input.get(0).files.length : 1,
                label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
                input.trigger('fileselect', [numFiles, label]);
            });

            // We can watch for our custom `fileselect` event like this
            $(document).ready( function() {
                $(':file').on('fileselect', function(event, numFiles, label) {

                    var input = $(this).parents('.input-group').find(':text'),
                      log = numFiles > 1 ? numFiles + ' files selected' : label;

                    if( input.length ) {
                      input.val(log);
                    } else {
                      if( log ) alert(log);
                    }
                });
            });
        });
    </script>


    <!-- <script>
    $(function(e) {
      $('input[name="schedule"]').daterangepicker({
        singleDatePicker: true,
        // multidate: true,
        showDropdowns: true,
        minYear: 1901,
        maxYear: parseInt(moment().format('YYYY'),10)
      }, function(start, end, label) {
        var years = moment().diff(start, 'years');
      });
    });
    </script> -->


    <script>





        $('.date').datepicker({
            multidate: true,
            format: 'yyyy-mm-dd',
            minDate: 0,
            // leftArrow: '<i class="fas fa-chevron-left"></i>',
        });
        // document.getElementById("date").datepicker({
        //     multidate: true,
        //     format: 'yyyy-mm-dd',
        //     minDate: new Date(),
        // });


        $('select').selectpicker();

        // $.('.date').datepicker.dates['en'] = {
        //     days: ["일요일", "월요일", "화요일", "수요일", "목요일", "금요일", "토요일"],
        //     daysShort: ["일", "월", "화", "수", "목", "금", "토"],
        //     daysMin: ["일", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
        //     months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
        //     monthsShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        //     today: "Today",
        //     clear: "Clear",
        //     format: "mm/dd/yyyy",
        //     titleFormat: "MM yyyy", /* Leverages same syntax as 'format' */
        //     weekStart: 0
        // };


    //
    // $('.date').datepicker({
    //         uiLibrary: 'bootstrap4'
    //     });




    // $('.date').dateDropper();
    </script>
    <script>
        $('.prev').html('<i class="fas fa-chevron-left" aria-hidden="true"></i>');
        $('.next').html('<i class="fas fa-chevron-right" aria-hidden="true"></i>');

        // $("#nal").
    </script>



    <script src="/static/scripts/profileedit.js"></script>

    <% include ./partials/footer %>

    </body>
</html>
